"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const BrsComponent_1 = require("./BrsComponent");
const RoArray_1 = require("./RoArray");
const BrsType_1 = require("../BrsType");
const Callable_1 = require("../Callable");
const Int32_1 = require("../Int32");
const Float_1 = require("../Float");
class RoString extends BrsComponent_1.BrsComponent {
    constructor(initialValue) {
        super("roString", ["ifStringOps"]);
        this.kind = BrsType_1.ValueKind.Object;
        // ---------- ifStringOps ----------
        /** Sets the string to the first len characters of s. */
        this.setString = new Callable_1.Callable("SetString", {
            signature: {
                args: [
                    new Callable_1.StdlibArgument("s", BrsType_1.ValueKind.String),
                    new Callable_1.StdlibArgument("len", BrsType_1.ValueKind.Int32),
                ],
                returns: BrsType_1.ValueKind.Void,
            },
            impl: (_interpreter, s, len) => {
                this.intrinsic = new BrsType_1.BrsString(s.value.substr(0, len.getValue()));
                return BrsType_1.BrsInvalid.Instance;
            },
        });
        /** Appends the first len characters of s to the end of the string. */
        this.appendString = new Callable_1.Callable("AppendString", {
            signature: {
                args: [
                    new Callable_1.StdlibArgument("s", BrsType_1.ValueKind.String),
                    new Callable_1.StdlibArgument("len", BrsType_1.ValueKind.Int32),
                ],
                returns: BrsType_1.ValueKind.Void,
            },
            impl: (_interpreter, s, len) => {
                this.intrinsic = this.intrinsic.concat(new BrsType_1.BrsString(s.value.substr(0, len.getValue())));
                return BrsType_1.BrsInvalid.Instance;
            },
        });
        /** Returns the number of characters in the string. */
        this.len = new Callable_1.Callable("Len", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.Int32,
            },
            impl: _interpreter => {
                return new Int32_1.Int32(this.intrinsic.value.length);
            },
        });
        /** Returns a string consisting of the first len characters of the string. */
        this.left = new Callable_1.Callable("Left", {
            signature: {
                args: [new Callable_1.StdlibArgument("len", BrsType_1.ValueKind.Int32)],
                returns: BrsType_1.ValueKind.String,
            },
            impl: (_interpreter, len) => {
                return new BrsType_1.BrsString(this.intrinsic.value.substr(0, len.getValue()));
            },
        });
        /** Returns a string consisting of the last len characters of the string. */
        this.right = new Callable_1.Callable("Right", {
            signature: {
                args: [new Callable_1.StdlibArgument("len", BrsType_1.ValueKind.Int32)],
                returns: BrsType_1.ValueKind.String,
            },
            impl: (_interpreter, len) => {
                let source = this.intrinsic.value;
                return new BrsType_1.BrsString(source.substr(source.length - len.getValue()));
            },
        });
        this.mid = new Callable_1.Callable("Mid", 
        /**
         * Returns a string consisting of the last characters of the string, starting at the
         * zero-based start_index.
         */
        {
            signature: {
                args: [new Callable_1.StdlibArgument("start_index", BrsType_1.ValueKind.Int32)],
                returns: BrsType_1.ValueKind.String,
            },
            impl: (_interpreter, startIndex) => {
                return new BrsType_1.BrsString(this.intrinsic.value.substr(startIndex.getValue()));
            },
        }, 
        /**
         * Returns a string consisting of num_chars characters of the string, starting at the
         * zero-based start_index.
         */
        {
            signature: {
                args: [
                    new Callable_1.StdlibArgument("start_index", BrsType_1.ValueKind.Int32),
                    new Callable_1.StdlibArgument("num_chars", BrsType_1.ValueKind.Int32),
                ],
                returns: BrsType_1.ValueKind.String,
            },
            impl: (_interpreter, startIndex, numChars) => {
                let source = this.intrinsic.value;
                return new BrsType_1.BrsString(this.intrinsic.value.substr(startIndex.getValue(), numChars.getValue()));
            },
        });
        this.instr = new Callable_1.Callable("Instr", 
        /** Returns the zero-based index of the first occurrence of substring in the string. */
        {
            signature: {
                args: [new Callable_1.StdlibArgument("substring", BrsType_1.ValueKind.String)],
                returns: BrsType_1.ValueKind.Int32,
            },
            impl: (_interpreter, substring) => {
                return new Int32_1.Int32(this.intrinsic.value.indexOf(substring.value));
            },
        }, 
        /**
         * Returns the zero-based index of the first occurrence of substring in the string, starting
         * at the specified zero-based start_index.
         */
        {
            signature: {
                args: [
                    new Callable_1.StdlibArgument("start_index", BrsType_1.ValueKind.Int32),
                    new Callable_1.StdlibArgument("substring", BrsType_1.ValueKind.String),
                ],
                returns: BrsType_1.ValueKind.Int32,
            },
            impl: (_interpreter, startIndex, substring) => {
                return new Int32_1.Int32(this.intrinsic.value.indexOf(substring.value, startIndex.getValue()));
            },
        });
        /**
         * Returns a copy of the string with all instances of fromStr replaced with toStr. If fromStr is
         * empty the return value is the same as the source string.
         */
        this.replace = new Callable_1.Callable("Replace", {
            signature: {
                args: [
                    new Callable_1.StdlibArgument("from", BrsType_1.ValueKind.String),
                    new Callable_1.StdlibArgument("to", BrsType_1.ValueKind.String),
                ],
                returns: BrsType_1.ValueKind.String,
            },
            impl: (_interpreter, from, to) => {
                if (from.value === "") {
                    return this.intrinsic;
                }
                return new BrsType_1.BrsString(this.intrinsic.value.replace(new RegExp(from.value, "g"), to.value));
            },
        });
        /**
         * Returns the string with any leading and trailing whitespace characters (space, TAB, LF, CR,
         * VT, FF, NO-BREAK SPACE, et al) removed.
         */
        this.trim = new Callable_1.Callable("Trim", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.String,
            },
            impl: _interpreter => {
                return new BrsType_1.BrsString(this.intrinsic.value.trim());
            },
        });
        /** Returns the value of the string interpreted as a decimal number. */
        this.toInt = new Callable_1.Callable("ToInt", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.Int32,
            },
            impl: _interpreter => {
                let int = Math.trunc(Number.parseFloat(this.intrinsic.value));
                if (Number.isNaN(int)) {
                    // non-integers are returned as "0"
                    return new Int32_1.Int32(0);
                }
                return new Int32_1.Int32(int);
            },
        });
        /** Returns the value of the string interpreted as a floating point number. */
        this.toFloat = new Callable_1.Callable("ToFloat", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.Float,
            },
            impl: _interpreter => {
                let float = Number.parseFloat(this.intrinsic.value);
                if (Number.isNaN(float)) {
                    // non-integers are returned as "0"
                    return new Float_1.Float(0);
                }
                return new Float_1.Float(float);
            },
        });
        /**
         * Splits the string into separate substrings separated by a single delimiter character. Returns
         * an roList containing each of the substrings. The delimiters are not returned.
         */
        this.tokenize = new Callable_1.Callable("Tokenize", {
            signature: {
                args: [new Callable_1.StdlibArgument("delim", BrsType_1.ValueKind.String)],
                returns: BrsType_1.ValueKind.Object,
            },
            impl: _interpreter => {
                _interpreter.stderr.write("WARNING: tokenize not yet implemented, because it returns an RoList.  Returning `invalid`.");
                return BrsType_1.BrsInvalid.Instance;
            },
        });
        /**
         * Splits the input string using the separator string as a delimiter, and returns an array of
         * the split token strings (not including the delimiter). An empty separator string indicates
         * to split the string by character.
         */
        this.split = new Callable_1.Callable("Split", {
            signature: {
                args: [new Callable_1.StdlibArgument("separator", BrsType_1.ValueKind.String)],
                returns: BrsType_1.ValueKind.Object,
            },
            impl: (_interpreter, separator) => {
                let parts;
                if (separator.value === "") {
                    // split characters apart, preserving multi-character unicode structures
                    parts = Array.from(this.intrinsic.value);
                }
                else {
                    parts = this.intrinsic.value.split(separator.value);
                }
                return new RoArray_1.RoArray(parts.map(part => new BrsType_1.BrsString(part)));
            },
        });
        /**
         * Returns the string with certain characters ("'<>&) replaced with the corresponding HTML
         * entity encoding.
         */
        this.getEntityEncode = new Callable_1.Callable("GetEntityEncode", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.String,
            },
            impl: _interpreter => {
                return new BrsType_1.BrsString(this.intrinsic.value.replace(/(['"<>&])/g, "\\$1"));
            },
        });
        /** URL encodes the specified string per RFC 3986 and returns the encoded string. */
        this.escape = new Callable_1.Callable("Escape", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.String,
            },
            impl: _interpreter => {
                return new BrsType_1.BrsString(
                // encoding courtesy of
                // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent#Description
                encodeURIComponent(this.intrinsic.value).replace(/[!'()*]/g, c => "%" +
                    c
                        .charCodeAt(0)
                        .toString(16)
                        .toUpperCase()));
            },
        });
        /** URL decodes the specified string per RFC 3986 and returns the decoded string. */
        this.unescape = new Callable_1.Callable("Unescape", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.String,
            },
            impl: _interpreter => {
                return new BrsType_1.BrsString(decodeURIComponent(this.intrinsic.value));
            },
        });
        /**
         * Encode the specified string with escape sequences for reserved Uniform Resource Identifier
         * (URI) characters.
         */
        this.encodeUri = new Callable_1.Callable("EncodeUri", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.String,
            },
            impl: _interpreter => {
                return new BrsType_1.BrsString(encodeURI(this.intrinsic.value));
            },
        });
        /**
         * Decode the specified string with escape sequences for reserved Uniform Resource Identifier
         * (URI) characters.
         */
        this.decodeUri = new Callable_1.Callable("DecodeUri", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.String,
            },
            impl: _interpreter => {
                return new BrsType_1.BrsString(decodeURI(this.intrinsic.value));
            },
        });
        /**
         * Encode the specified string with escape sequences for reserved Uniform Resource Identifier
         * (URI) component characters.
         */
        this.encodeUriComponent = new Callable_1.Callable("EncodeUriComponent", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.String,
            },
            impl: _interpreter => {
                return new BrsType_1.BrsString(encodeURIComponent(this.intrinsic.value));
            },
        });
        this.decodeUriComponent = new Callable_1.Callable("DecodeUriCOmponent", {
            signature: {
                args: [],
                returns: BrsType_1.ValueKind.String,
            },
            impl: _interpreter => {
                return new BrsType_1.BrsString(decodeURIComponent(this.intrinsic.value));
            },
        });
        this.intrinsic = initialValue;
        this.registerMethods([
            this.setString,
            this.appendString,
            this.len,
            this.left,
            this.right,
            this.mid,
            this.instr,
            this.replace,
            this.trim,
            this.toInt,
            this.toFloat,
            this.tokenize,
            this.split,
            this.getEntityEncode,
            this.escape,
            this.unescape,
            this.encodeUri,
            this.decodeUri,
            this.encodeUriComponent,
            this.decodeUriComponent,
        ]);
    }
    getValue() {
        return this.intrinsic.value;
    }
    equalTo(other) {
        if (other.kind === BrsType_1.ValueKind.String) {
            return BrsType_1.BrsBoolean.from(other.value === this.intrinsic.value);
        }
        if (other instanceof RoString) {
            return BrsType_1.BrsBoolean.from(other.intrinsic.value === this.intrinsic.value);
        }
        return BrsType_1.BrsBoolean.False;
    }
    lessThan(other) {
        if (other.kind === BrsType_1.ValueKind.String) {
            return this.unbox().lessThan(other);
        }
        if (other instanceof RoString) {
            return this.unbox().lessThan(other.unbox());
        }
        return BrsType_1.BrsBoolean.False;
    }
    greaterThan(other) {
        if (other.kind === BrsType_1.ValueKind.String) {
            return this.unbox().greaterThan(other);
        }
        if (other instanceof RoString) {
            return this.unbox().greaterThan(other.unbox());
        }
        return BrsType_1.BrsBoolean.False;
    }
    unbox() {
        return this.intrinsic;
    }
    toString(_parent) {
        return this.intrinsic.toString();
    }
}
exports.RoString = RoString;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUm9TdHJpbmcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvYnJzVHlwZXMvY29tcG9uZW50cy9Sb1N0cmluZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUE4QztBQUM5Qyx1Q0FBb0M7QUFDcEMsd0NBQWdHO0FBQ2hHLDBDQUF1RDtBQUl2RCxvQ0FBaUM7QUFDakMsb0NBQWlDO0FBRWpDLE1BQWEsUUFBUyxTQUFRLDJCQUFZO0lBUXRDLFlBQVksWUFBdUI7UUFDL0IsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7UUFSOUIsU0FBSSxHQUFHLG1CQUFTLENBQUMsTUFBTSxDQUFDO1FBK0VqQyxvQ0FBb0M7UUFDcEMsd0RBQXdEO1FBQ2hELGNBQVMsR0FBRyxJQUFJLG1CQUFRLENBQUMsV0FBVyxFQUFFO1lBQzFDLFNBQVMsRUFBRTtnQkFDUCxJQUFJLEVBQUU7b0JBQ0YsSUFBSSx5QkFBYyxDQUFDLEdBQUcsRUFBRSxtQkFBUyxDQUFDLE1BQU0sQ0FBQztvQkFDekMsSUFBSSx5QkFBYyxDQUFDLEtBQUssRUFBRSxtQkFBUyxDQUFDLEtBQUssQ0FBQztpQkFDN0M7Z0JBQ0QsT0FBTyxFQUFFLG1CQUFTLENBQUMsSUFBSTthQUMxQjtZQUNELElBQUksRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFZLEVBQUUsR0FBVSxFQUFFLEVBQUU7Z0JBQzdDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxtQkFBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNsRSxPQUFPLG9CQUFVLENBQUMsUUFBUSxDQUFDO1lBQy9CLENBQUM7U0FDSixDQUFDLENBQUM7UUFFSCxzRUFBc0U7UUFDOUQsaUJBQVksR0FBRyxJQUFJLG1CQUFRLENBQUMsY0FBYyxFQUFFO1lBQ2hELFNBQVMsRUFBRTtn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