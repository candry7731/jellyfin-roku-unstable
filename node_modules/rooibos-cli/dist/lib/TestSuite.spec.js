"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var chai = require("chai");
var fs = require("fs-extra");
var chai_1 = require("chai");
var TestSuiteBuilder_1 = require("./TestSuiteBuilder");
var TestUtils_1 = require("./TestUtils");
var chaiSubset = require('chai-subset');
chai.use(chaiSubset);
var builder;
var sourcePath = 'src/test/stubProject';
var targetPath = 'build';
function clearFiles() {
    fs.removeSync(targetPath);
}
function copyFiles() {
    try {
        fs.copySync(sourcePath, targetPath);
    }
    catch (err) {
        console.error(err);
    }
}
describe('TestSuite tests ', function () {
    beforeEach(function () {
        builder = new TestSuiteBuilder_1.TestSuiteBuilder(50, false);
    });
    describe('asJson', function () {
        beforeEach(function () {
            clearFiles();
            copyFiles();
        });
        it('processes valid test file', function () {
            var file = TestUtils_1.makeFile("build/source/tests/specs", "VideoModuleTests.brs");
            var testSuite = builder.processFile(file);
            chai_1.expect(testSuite).to.not.be.null;
            chai_1.expect(testSuite.isValid).to.be.true;
            var json = testSuite.asJson();
            chai_1.expect(json).to.not.be.null;
        });
    });
});
